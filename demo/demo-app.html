<link rel="import" href="../../polymer/polymer-element.html">
<link rel="import" href="../../iron-ajax/iron-ajax.html">
<link rel="import" href="../exmg-sortable.html">

<dom-module id="demo-app">
  <template>
    <style>
    ul, li {
      margin-left: 0;
      padding-left: 0;
    }

    li {
      display: flex;
      padding: 10px 15px;
      border-bottom: 1px solid silver;
    }

    li.clone {
      background: white;
      width: 100%;
      box-sizing: border-box;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
      opacity: 0.9;
    }

    li.current {
      background: #c0c0c0;
      opacity: 0.25;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.5) inset;
    }

    li > strong {
      flex-grow: 1;
    }

    li > span {
      width: 30%;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    td, th {
      padding: 10px 15px;
      border-bottom: 1px solid silver;
    }

    tr.current {
      background: #f0f0f0;
    }

    tr.clone {
      opacity: 0;
    }

    .boxes {
        margin-top: 2em;
        overflow: hidden;
    }

    .box {
      float: left;
      width: 150px;
      height: 150px;
      padding: 10px;
      margin: 20px;
      box-sizing: border-box;
      background: #f0f0f0;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    }

    .box.current {
      opacity: 0;
    }

    </style>
    <iron-ajax auto url="[[dataUrl]]" handle-as="json" last-response="{{users}}"></iron-ajax>

    <exmg-sortable selector="li" items="{{users}}">
      <ul>
        <template is="dom-repeat" items="[[users]]">
          <li>
            <strong>[[item.firstName]]</strong>
            <span>[[item.lastName]]</span>
            <span>[[item.email]]</span>
          </li>
        </template>
      </ul>
    </exmg-sortable>

    <exmg-sortable selector="div.box" items="{{users}}">
      <div class="boxes">
        <template is="dom-repeat" items="[[users]]">
          <div class="box">
            [[item.firstName]]
          </div>
        </template>
      </div>
    </exmg-sortable>

    <exmg-sortable selector="tr" items="{{users}}">
      <table>
        <template is="dom-repeat" items="[[users]]">
          <tr>
            <th>[[item.firstName]]</th>
            <td>[[item.lastName]]</td>
            <td>[[item.email]]</td>
          </tr>
        </template>
      </table>
    </exmg-sortable>

  </template>

  <script>
    class DemoApp extends Polymer.Element {
      static get is() { return 'demo-app'; }
      static get properties() {
        return {
          dataUrl: {
            type: String
          },
          users: {
            type: Array,
            notify: true
          }
        };
      }
    }

    window.customElements.define(DemoApp.is, DemoApp);
  </script>
</dom-module>
