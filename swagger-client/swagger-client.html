<dom-module id="exmg-data-connection-config">
  <script src='./swagger-client.js' type='text/javascript'></script>
  <script>
    'use strict';
    {
      /**
      * Data connection Config - Polymer element that inits swaggerClient through config to access globaly
      *
      **/
      class DataConnectionConfigElement extends Polymer.Element {
        static get is() { return 'exmg-data-connection-config'; }
        static get properties() {
          return {
            swaggerUrl: {
              type: String,
              value: '/src/swagger.json',
            },
            serverUrl: {
              type: String,
              notify: true,
            }
          }
        }
        constructor() {
          super();
          if (!Exmg.DataConnectionConfig) {
            new SwaggerClient(this.swaggerUrl, { url: this.serverUrl }).then((swaggerClient) => {
              Exmg.DataConnectionConfig = swaggerClient;
              Exmg.DataConnectionConfig.url = this.serverUrl;
              Exmg.DataConnectionConfig.spec.basePath = '/api';
            });
          }
        }
      }
      window.customElements.define(DataConnectionConfigElement.is, DataConnectionConfigElement);

      /**
       * @namespace Exmg
       */
      window.Exmg = window.Exmg || {};
      Exmg.DataConnectionConfigElement = DataConnectionConfigElement;
    }
  </script>
  <exmg-data-connection-config
    server-url="https://backend.winview-dev-feature.playtotv.com/api/"
  ></exmg-data-connection-config>
</dom-module>
